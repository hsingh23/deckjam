{"version":3,"sources":["app.js"],"names":[],"mappings":"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","file":"app.prod.js","sourcesContent":["\"use babel\";\nif (location.protocol != 'http:') {\n  location.protocol = 'http:';\n}\n// if ('serviceWorker' in navigator) {\n//   navigator.serviceWorker.register('service-worker.js');\n// }\n// removed service workers and fetch because quizlet does not do cors http://stackoverflow.com/a/34940074 \n// no-cors mode won't send authorization header https://developer.mozilla.org/en-US/docs/Web/API/Request/mode\nvar lo = _;\n// var app = angular.module('deckjam', ['ngMaterial'])\nvar app = angular.module('deckjam', ['ngMaterial', 'angulartics', 'angulartics.google.analytics'])\n.config(function($mdThemingProvider) {\n  var customBlueMap = $mdThemingProvider.extendPalette('light-blue', {\n    'contrastDefaultColor': 'light',\n    'contrastDarkColors': ['50'],\n    '50': 'ffffff'\n  })\n  $mdThemingProvider.definePalette('customBlue', customBlueMap)\n  $mdThemingProvider.theme('default')\n    .primaryPalette('customBlue', {\n      'default': '500',\n      'hue-1': '50'\n    })\n    .accentPalette('pink')\n  $mdThemingProvider.theme('input', 'default')\n    .primaryPalette('grey')\n})\n.directive('iconText', function($mdMedia) {\n  return {\n    restrict: 'E',\n    scope: {\n      tip: '@',\n      icon: '@',\n      style: '@?'\n    },\n    template: `<md-tooltip style=\"{{style}}\" hide-gt-xs=\"hide-gt-xs\">\n      {{tip}}\n    </md-tooltip>\n    <md-icon hide-gt-xs=\"hide-gt-xs\" class=\"material-icons\" style=\"{{style}}\">\n      {{icon}}\n    </md-icon>\n    <span style=\"{{style}}\" hide-xs>{{tip}}</span>`\n  }\n})\n.directive('loseFocus', function() {\n  return {\n    link: function(scope, element, attrs) {\n      scope.$watch(attrs.loseFocus, function(value) {\n        if(value === true) {\n          element[0].blur()\n        }\n      })\n    }\n  }\n})\n.controller('homeContainer', [\"$scope\", \"$http\", \"$mdToast\", \"$mdMedia\", \"$analytics\", '$anchorScroll', (_, $http, $mdToast, $mdMedia, $analytics, $anchorScroll)=> {\n  _.goTo = id=> $anchorScroll(id)\n  _.api = 'http://ayudh.org:3337'\n  _.losefocus = false\n  _.draggable = false\n  // _.api = 'http://localhost:3337'\n  _.createdOne = localStorage.createdOne && parseInt(localStorage.createdOne) || 0\n  _.fetching = false\n  _.getSetsforTerm = (term)=> $http.get(`${_.api}/quizlet/search?query=${term}`, { cache: true})\n  _.getSets = (sets)=> $http.get(`${_.api}/quizlet/sets?query=${sets}`, { cache: true})\n  _.decks = JSON.parse(localStorage.decks || '{}')\n  _.selected = JSON.parse(localStorage.selected || '{}')\n  _.selectedOrder = \"time\"\n  _.reverse = true\n  _.md = false\n  _.searched = \"your last search term\"\n  _.numSelected = ()=> lo.size(_.selected)\n  _.numDecks = ()=> lo.size(_.decks)\n  _.selectedArray = ()=> lo.values(_.selected)\n  _.startIndexes = {}\n  if(_.numSelected() > 0){\n    $mdToast.showSimple(`You have ${_.numSelected()} cards selected. Remember to clear them if you are making a new set.`)\n  }\n  function selectTerm(term, setId) {\n    if (term.selected) {\n      _.selected[term.id] = lo.assign({},term)\n      _.selected[term.id].setId = setId\n      _.selected[term.id].time = (new Date()).getTime()\n    } else {\n      delete _.selected[term.id]\n    }\n    localStorage.selected = JSON.stringify(_.selected)\n  }\n  _.selectClickTerm = (term, setId) => {\n    // checkbox check for tablet and below\n    // if(!$mdMedia('gt-md')) {\n      term.selected = !term.selected\n      selectTerm(term, setId)\n    // }\n  }\n  _.selectDragTerm = (term, setId, mouseDown=true) => {\n    // drag anywhere for above that\n    if($mdMedia('gt-md')){\n      term.selected = (mouseDown) ? !term.selected : term.selected\n      selectTerm(term, setId)\n    }\n  }\n  _.removeDeck = id=> delete _.decks[id]\n  _.selectAll = id=> {\n    if (_.decks[id]) {\n      // some unselected, then select all\n      if (_.decks[id].terms.find(x=> !x.selected)){\n        _.decks[id].terms.forEach(term => {\n          term.selected = true\n          _.selected[term.id] = lo.assign({},term)\n          _.selected[term.id].setId = id\n          _.selected[term.id].time = (new Date()).getTime()\n        })\n      } else {\n        // unselect everything\n        _.decks[id].terms.forEach(term => {\n          term.selected = false\n          delete _.selected[term.id]\n        })\n      }\n      localStorage.selected = JSON.stringify(_.selected)\n    }\n  }\n  _.clearSelected = ()=> {\n    _.selected = {}\n    localStorage.selected = '{}'\n  }\n  _.swapSelected = id=> {\n    var {term, definition} = _.selected[id]\n    _.selected[id].definition = term\n    _.selected[id].term = definition\n    localStorage.selected = JSON.stringify(_.selected)\n  }\n  _.swapDeck = id=> {\n    _.decks[id].terms.forEach(o=>{\n      var {term, definition} = o\n      o.definition = term\n      o.term = definition\n    })\n  }\n\n  _.removeSelected = id=> {\n    var {setId, rank} = _.selected[id]\n    if(_.decks[setId]) {\n      _.decks[setId].terms[rank].selected = false\n    }\n    delete _.selected[id]\n    localStorage.selected = JSON.stringify(_.selected)\n  }\n  _.create = (title)=> {\n    _.url = null\n    _.creating = true\n    var data = lo.map(_.selected, (v,k)=> lo.pick(v, ['term', 'definition', 'image']))\n    $http({\n      method: 'POST',\n      url: `${_.api}/create-set`,\n      data: JSON.stringify({\n        title: title,\n        lang_terms: 'en',\n        lang_definitions: 'en',\n        data\n      })\n    }).then(res=>{\n      _.url = `https://quizlet.com${res.data.url}`\n      _.creating = false\n      if (res.data.error) {\n        $mdToast.showSimple(res.data.error)\n      } else {\n        $mdToast.showSimple(\"Your deck is created\")\n        _.createdOne += 1\n        localStorage.createdOne = _.createdOne\n        _.selected_actions = 'home'\n      }\n    }).catch(()=>{\n      _.creating=false\n      _.selected_actions = 'home'\n      $mdToast.showSimple(\"Unable to create deck\")\n      $analytics.eventTrack(\"Create Failed\", {category: 'Create', label: lo.map(_.selected, (v,k)=> lo.pick(v, ['image']))})\n    })\n  }\n  _.import = (importUrl) => {\n    _.fetching = true\n    var x = importUrl && importUrl.match(/\\d+/)\n    x && x[0] && _.getSets(x[0]).then(res=>{\n      _.fetching = false\n      _.selected_actions = 'home'\n      res.data.forEach(set=> {\n        set.terms.forEach(term => {\n          term.selected = true\n          _.selected[term.id] = lo.assign({},term)\n          _.selected[term.id].setId = set.id\n          _.selected[term.id].time = (new Date()).getTime()\n        })\n      })\n    }).catch(()=>{\n      _.fetching = false\n      _.selected_actions = 'home'\n    })\n    localStorage.selected = JSON.stringify(_.selected)\n  }\n  function getSets(setIds) {\n    _.getSets(setIds.map(a=>a.id).join(','))\n    .then(res => {\n      res.data.forEach(set=> {\n        var terms = lo.filter(set.terms, card=> {\n          if (_.bloom.test(card.term + card.definition)) {\n            return false\n          } else {\n            _.bloom.add(card.term + card.definition)\n            return true\n          }\n        })\n        terms.forEach((t,i) => t.rank = i)\n        if (terms.length > 2){\n          _.decks[set.id] = lo.pick(set, ['url', 'title', 'modified_date', 'lang_terms', 'lang_definitions'])\n          _.decks[set.id].terms = terms\n          _.decks[set.id].terms_length = terms.length\n        }\n      })\n      _.fetching = false\n      _.selectedIndex=0\n      localStorage.decks = JSON.stringify(_.decks)\n      $mdToast.showSimple(_.numDecks() + \" Quizlet decks loaded. Click the checkbox to choose a card.\")\n    }).catch(()=>{\n      _.fetching = false\n      $mdToast.showSimple(\"Unable to get terms - try another query\")\n    })\n  }\n  _.performSearch = ()=> _.getTerms({restartIndex:true, replaceTerms: true, replaceBloom: true})\n  _.loadNext = ()=> _.getTerms({restartIndex:false, replaceTerms: true, replaceBloom: false})\n  _.loadPrevious = ()=> {\n    _.startIndexes[_.search]  = _.startIndexes[_.search] - 20\n    _.getTerms({restartIndex:false, replaceTerms: true, replaceBloom: true})\n  }\n  _.getTerms = ({restartIndex=true, replaceTerms=true, replaceBloom=true})=> {\n    _.losefocus = true\n    _.fetching = true\n    _.decks = replaceTerms ? {} : (_.decks || {})\n    _.bloom = replaceBloom ? new BloomFilter(3e5, 3e-5) : (_.bloom || new BloomFilter(3e5, 3e-5))\n    var term = _.search.trim()\n    $analytics.eventTrack((restartIndex ? \"Load more\": \"Search\"), {category: 'Fetch', label: term})\n    if(term.length > 2){\n      _.searched = term\n      _.getSetsforTerm(term).then(res=> {\n        var startIndex =_.startIndexes[term] = restartIndex ? 0 : (_.startIndexes[term] || 0)\n        getSets(res.data.sets.slice(startIndex,startIndex+10))\n        _.startIndexes[term] += 10\n      })\n      .catch(()=>{\n        _.fetching = false\n        $mdToast.showSimple(\"Unable to get terms - try another query\")\n      })\n    }\n  }\n}])\n"]}